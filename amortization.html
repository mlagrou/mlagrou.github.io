<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loan Amortization Calculator</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h2>Loan and Amortization Calculator</h2>

<form id="loanForm">
  <div id="year1">
	<label for="borrowingYear1">Borrowing Year 1:</label>
	<input type="number" id="borrowingYear1" required>
	<label for="loanAmt1">Loan Amount 1:</label>
	<input type="number" id="loanAmt1" step="0.01" required> <br>
  </div>
  <div id="year2">
	<label for="borrowingYear2">Borrowing Year 2:</label>
	 <!--changed to read only-->
	<input type="number" id="borrowingYear2" readonly><br><br>
	<label for="loanAmt2">Loan Amount 2:</label>
	<input type="number" id="loanAmt2" step="0.01" required><br><br>
  </div>
<div id="year3">
	<label for="borrowingYear3">Borrowing Year 3:</label>
	 <!--changed to read only-->
	<input type="number" id="borrowingYear3" readonly><br><br>
	<label for="loanAmt3">Loan Amount 3:</label>
	<input type="number" id="loanAmt3" step="0.01" required><br><br>
</div>
  <div id="year4">
	<label for="borrowingYear4">Borrowing Year 4:</label>
	<!--changed to read only-->
	<input type="number" id="borrowingYear4" readonly><br><br>
	<label for="loanAmt4">Loan Amount 4:</label>
	<input type="number" id="loanAmt4" step="0.01" required><br><br>
  </div>
<button type="button" onclick="calculateDebt()">Calculate</button>
</form>
<h3>Results</h3>
<p id="totalDebt">Total Debt: </p>
<p id="amortization">Annual Amortization Payments: </p>
<!-- added table in the HTML here to add to-->
<table>
  <tr><th>Year</th><th>Payment</th><th>Interest</th><th>Principal</th><th>Remaining Debt</th></tr>
  <tbody id=ammortizationTable>
  </tbody>
<script>

  <!-- add event listener to modify borrowing years 2, 3, and 4 based on input-->
  document.getElementById('borrowingYear1').addEventListener("input", () => {
    const borrowingYear1 = parseInt(document.getElementById('borrowingYear1').value);
    document.getElementById('borrowingYear2').value = borrowingYear1 + 1;
    document.getElementById('borrowingYear3').value = borrowingYear1 + 2;
    document.getElementById('borrowingYear4').value = borrowingYear1 + 3;

});

  
function calculateDebt() {
const borrowingYear1 = parseInt(document.getElementById('borrowingYear1').value);
const loanAmt1 = parseFloat(document.getElementById('loanAmt1').value);
const borrowingYear2 = parseInt(document.getElementById('borrowingYear2').value);
const loanAmt2 = parseFloat(document.getElementById('loanAmt2').value);
const borrowingYear3 = parseInt(document.getElementById('borrowingYear3').value);
const loanAmt3 = parseFloat(document.getElementById('loanAmt3').value);
const borrowingYear4 = parseInt(document.getElementById('borrowingYear4').value);
const loanAmt4 = parseFloat(document.getElementById('loanAmt4').value);
const interestRate = 0.05; // 5% interest
const yearsBetween1and4 = borrowingYear4 - borrowingYear1;
let totalDebt = loanAmt1 * Math.pow(1 + interestRate, yearsBetween1and4) +
loanAmt2 * Math.pow(1 + interestRate, yearsBetween1and4 - 1) +
loanAmt3 * Math.pow(1 + interestRate, yearsBetween1and4 - 2) +
loanAmt4; // Last loan has no interest yet
<!--here  is the number of repayment years-->
  const repaymentYears = 10;
  
const amortization = (totalDebt * interestRate) / (1 - Math.pow(1 + interestRate, -repaymentYears));
document.getElementById('totalDebt').textContent = `Total Debt: $${totalDebt.toFixed(2)}`;
document.getElementById('amortization').textContent = `Annual Amortization Payments: $${amortization.toFixed(2)}`;
  
  const tableBody = document.getElementById('ammortizationTable')
  
 let remainingDebt = totalDebt;

  for(let i = 0; i <= repaymentYears - 1; ++i){
    const thisYear = borrowingYear4 + i
    const interestPayment = remainingDebt * interestRate;
    const principalPayment = amortization - interestPayment;
    remainingDebt -= principalPayment; 
    const newRow = `<tr>
    
                <td>${thisYear}</td>
                <td>$${amortization.toFixed(2)}</td>
                <td>$${interestPayment.toFixed(2)}</td>
                <td>$${principalPayment.toFixed(2)}</td>
                <td>$${remainingDebt.toFixed(2)}</td>
                </tr>
                `
      tableBody.innerHTML += newRow;  }
}    

  


</script>
</body>
</html>
